<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IELTS Test Creator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }

        .header h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.3);
            font-weight: 700;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.95;
            text-shadow: 1px 1px 4px rgba(0,0,0,0.2);
        }

        .skill-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .skill-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            color: white;
        }

        .skill-card:hover {
            transform: translateY(-8px);
            background: rgba(255, 255, 255, 0.25);
            border-color: rgba(255, 255, 255, 0.3);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
        }

        .skill-card.active {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }

        .skill-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            display: block;
        }

        .skill-title {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .skill-desc {
            font-size: 0.95rem;
            opacity: 0.9;
            line-height: 1.4;
        }

        .form-container {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 45px;
            box-shadow: 0 25px 70px rgba(0, 0, 0, 0.15);
            margin-bottom: 20px;
            display: none;
        }

        .form-container.active {
            display: block;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section-title {
            font-size: 2.2rem;
            margin-bottom: 35px;
            color: #2c3e50;
            text-align: center;
            position: relative;
            font-weight: 700;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 3px;
        }

        .form-group {
            margin-bottom: 28px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 28px;
        }

        .form-row-3 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin-bottom: 28px;
        }

        label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #555;
            font-size: 15px;
        }

        .required {
            color: #e74c3c;
        }

        input[type="text"],
        input[type="number"],
        input[type="email"],
        input[type="url"],
        textarea,
        select {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid #e1e8ed;
            border-radius: 15px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: white;
            color: #333;
            font-family: inherit;
        }

        input:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.15);
            transform: translateY(-2px);
        }

        textarea {
            min-height: 140px;
            resize: vertical;
            line-height: 1.6;
        }

        .textarea-large {
            min-height: 220px;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 18px 36px;
            border-radius: 15px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #6c757d 0%, #5a6268 100%);
            margin-right: 15px;
        }

        .btn-success {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        }

        .btn-danger {
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
            padding: 10px 20px;
            font-size: 14px;
        }

        .question-builder {
            background: #f8f9fa;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            border: 2px solid #e9ecef;
        }

        .question-item {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid #e9ecef;
            position: relative;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .question-number {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .option-input {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .option-input input[type="radio"] {
            width: auto;
            margin: 0;
        }

        .option-input input[type="text"] {
            border: 1px solid #ddd;
            padding: 10px;
        }

        .add-question-btn {
            width: 100%;
            background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);
            margin-bottom: 25px;
        }

        .task-section {
            background: #f8f9fa;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            border: 2px solid #e9ecef;
        }

        .file-upload-area {
            border: 3px dashed #667eea;
            border-radius: 15px;
            padding: 50px 25px;
            text-align: center;
            background: rgba(102, 126, 234, 0.08);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .file-upload-area:hover {
            background: rgba(102, 126, 234, 0.15);
            border-color: #764ba2;
            transform: translateY(-2px);
        }

        .file-upload-area.dragover {
            background: rgba(102, 126, 234, 0.2);
            border-color: #764ba2;
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checkbox-item:hover {
            background: #e9ecef;
        }

        .checkbox-item input[type="checkbox"] {
            width: auto;
            margin: 0;
        }

        .advanced-settings {
            background: #f8f9fa;
            border-radius: 20px;
            padding: 30px;
            margin-top: 35px;
        }

        .back-to-selector {
            background: linear-gradient(135deg, #6c757d 0%, #5a6268 100%);
            margin-bottom: 25px;
        }

        @media (max-width: 768px) {
            .form-row,
            .form-row-3 {
                grid-template-columns: 1fr;
            }
            
            .skill-selector {
                grid-template-columns: 1fr;
            }
            
            .options-container {
                grid-template-columns: 1fr;
            }
            
            .container {
                padding: 15px;
            }
            
            .form-container {
                padding: 30px 20px;
            }

            .header h1 {
                font-size: 2.2rem;
            }

            .section-title {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎓 IELTS Test Creator</h1>
            <p>Tạo bài kiểm tra IELTS chuyên nghiệp và hiệu quả</p>
        </div>

        <!-- Skill Selector -->
        <div id="skillSelector" class="skill-selector">
            <div class="skill-card" onclick="showForm('listening')">
                <span class="skill-icon">🎧</span>
                <div class="skill-title">Listening</div>
                <div class="skill-desc">Create comprehensive listening tests with audio files and various question types</div>
            </div>
            
            <div class="skill-card" onclick="showForm('reading')">
                <span class="skill-icon">📖</span>
                <div class="skill-title">Reading</div>
                <div class="skill-desc">Design reading comprehension tests with passages and diverse question formats</div>
            </div>
            
            <div class="skill-card" onclick="showForm('writing')">
                <span class="skill-icon">✍️</span>
                <div class="skill-title">Writing</div>
                <div class="skill-desc">Build writing assessments with Task 1 and Task 2 components</div>
            </div>
            
            <div class="skill-card" onclick="showForm('speaking')">
                <span class="skill-icon">🎤</span>
                <div class="skill-title">Speaking</div>
                <div class="skill-desc">Construct speaking evaluations with all three parts and cue cards</div>
            </div>
        </div>

        <!-- LISTENING FORM -->
        <div id="listeningForm" class="form-container">
            <button class="btn back-to-selector" onclick="backToSelector()">← Back to Skills</button>
            
            <h2 class="section-title">🎧 Listening Test Creator</h2>
            
            <form id="listeningTestForm">
                <div class="form-row">
                    <div class="form-group">
                        <label>Test Title <span class="required">*</span></label>
                        <input type="text" name="title" placeholder="e.g., IELTS Listening Practice Test 1" required>
                    </div>
                    <div class="form-group">
                        <label>Difficulty Level</label>
                        <select name="difficulty">
                            <option value="4-5">Band 4.0 - 5.0 (Beginner)</option>
                            <option value="5.5-6" selected>Band 5.5 - 6.0 (Intermediate)</option>
                            <option value="6.5-7">Band 6.5 - 7.0 (Upper-Intermediate)</option>
                            <option value="7.5-8">Band 7.5 - 8.0 (Advanced)</option>
                            <option value="8.5-9">Band 8.5 - 9.0 (Expert)</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Duration (minutes)</label>
                        <input type="number" name="duration" value="30" min="10" max="60">
                    </div>
                    <div class="form-group">
                        <label>Total Questions</label>
                        <input type="number" name="totalQuestions" value="40" min="10" max="50">
                    </div>
                </div>

                <div class="form-group">
                    <label>Audio File Upload <span class="required">*</span></label>
                    <div class="file-upload-area" onclick="document.getElementById('audioFile').click()">
                        <p>🎵 Click to upload audio file or drag & drop</p>
                        <p style="font-size: 14px; color: #666; margin-top: 12px;">Supported formats: MP3, WAV, M4A (Max 100MB)</p>
                        <input type="file" id="audioFile" name="audioFile" accept="audio/*" style="display: none;" required>
                    </div>
                </div>

                <div class="form-group">
                    <label>Audio Transcript <span class="required">*</span></label>
                    <textarea name="transcript" class="textarea-large" placeholder="Paste the complete audio transcript here. This will help in creating accurate questions and answers..." required></textarea>
                </div>

                <div class="question-builder">
                    <h3 style="margin-bottom: 25px;">📝 Questions Builder</h3>
                    
                    <div class="form-row-3">
                        <div class="form-group">
                            <label>Section</label>
                            <select id="listeningSection">
                                <option value="1">Section 1 (Social Context)</option>
                                <option value="2">Section 2 (Monologue)</option>
                                <option value="3">Section 3 (Academic Discussion)</option>
                                <option value="4">Section 4 (Academic Lecture)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Question Type</label>
                            <select id="listeningQuestionType">
                                <option value="multiple-choice">Multiple Choice</option>
                                <option value="fill-blanks">Fill in the Blanks</option>
                                <option value="matching">Matching</option>
                                <option value="map-labeling">Map/Plan Labeling</option>
                                <option value="form-completion">Form Completion</option>
                                <option value="note-completion">Note Completion</option>
                                <option value="table-completion">Table Completion</option>
                                <option value="flow-chart">Flow Chart</option>
                                <option value="summary-completion">Summary Completion</option>
                                <option value="short-answer">Short Answer</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Time Range (mm:ss)</label>
                            <input type="text" id="timeRange" placeholder="01:30 - 03:45">
                        </div>
                    </div>

                    <div id="listeningQuestions"></div>
                    
                    <button type="button" class="btn add-question-btn" onclick="addListeningQuestion()">+ Add Question</button>
                </div>

                <div class="form-group">
                    <label>Special Instructions</label>
                    <textarea name="instructions" placeholder="Any special instructions for test-takers (e.g., 'You will hear each recording only once', 'Write your answers in the order you hear them')"></textarea>
                </div>

                <!-- General Settings for Listening -->
                <div class="advanced-settings">
                    <h3 style="margin-bottom: 25px;">⚙️ General Settings</h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Created By</label>
                            <input type="text" name="createdBy" placeholder="Teacher/Author name">
                        </div>
                        <div class="form-group">
                            <label>Institution</label>
                            <input type="text" name="institution" placeholder="School/Institution name">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Test Availability</label>
                            <select name="availability">
                                <option value="public">Public (Anyone can access)</option>
                                <option value="private">Private (Invited users only)</option>
                                <option value="premium">Premium (Paid users only)</option>
                                <option value="draft">Draft (Not published)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Number of Attempts</label>
                            <select name="attempts">
                                <option value="unlimited">Unlimited</option>
                                <option value="1">1 Attempt</option>
                                <option value="2">2 Attempts</option>
                                <option value="3">3 Attempts</option>
                                <option value="5">5 Attempts</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Test Description</label>
                        <textarea name="description" placeholder="Brief description of this listening test, its objectives, and what students can expect..."></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Tags (for search)</label>
                            <input type="text" name="tags" placeholder="e.g., ielts, listening, academic, band7, practice">
                        </div>
                        <div class="form-group">
                            <label>Passing Score (%)</label>
                            <input type="number" name="passingScore" value="65" min="0" max="100">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Auto-grading</label>
                            <select name="autoGrading">
                                <option value="enabled">Enabled (automatic scoring)</option>
                                <option value="partial">Partial (with manual review)</option>
                                <option value="disabled">Disabled (manual grading only)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Show Results</label>
                            <select name="showResults">
                                <option value="immediate">Immediately after completion</option>
                                <option value="after-review">After manual review</option>
                                <option value="scheduled">After specific date</option>
                                <option value="never">Never (instructor only)</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Learning Objectives</label>
                        <textarea name="objectives" placeholder="What will students achieve after completing this listening test?
• Assess listening comprehension in various contexts
• Practice note-taking and detail recognition
• Improve understanding of different accents
• Develop time management skills..."></textarea>
                    </div>

                    <div class="form-group">
                        <label>Preparation Tips</label>
                        <textarea name="tips" placeholder="Helpful advice for students:
• Read questions before listening
• Listen for key words and synonyms
• Don't leave any blanks
• Pay attention to spelling
• Use the time between sections wisely..."></textarea>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 40px;">
                    <button type="button" class="btn btn-secondary">💾 Save as Draft</button>
                    <button type="submit" class="btn btn-success">🚀 Create Listening Test</button>
                </div>
            </form>
        </div>

        <!-- READING FORM -->
        <div id="readingForm" class="form-container">
            <button class="btn back-to-selector" onclick="backToSelector()">← Back to Skills</button>
            
            <h2 class="section-title">📖 Reading Test Creator</h2>
            
            <form id="readingTestForm">
                <div class="form-row">
                    <div class="form-group">
                        <label>Test Title <span class="required">*</span></label>
                        <input type="text" name="title" placeholder="e.g., IELTS Reading Practice Test 1" required>
                    </div>
                    <div class="form-group">
                        <label>Test Type</label>
                        <select name="testType">
                            <option value="academic">Academic Reading</option>
                            <option value="general">General Training Reading</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Difficulty Level</label>
                        <select name="difficulty">
                            <option value="4-5">Band 4.0 - 5.0 (Beginner)</option>
                            <option value="5.5-6" selected>Band 5.5 - 6.0 (Intermediate)</option>
                            <option value="6.5-7">Band 6.5 - 7.0 (Upper-Intermediate)</option>
                            <option value="7.5-8">Band 7.5 - 8.0 (Advanced)</option>
                            <option value="8.5-9">Band 8.5 - 9.0 (Expert)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Duration (minutes)</label>
                        <input type="number" name="duration" value="60" min="30" max="90">
                    </div>
                </div>

                <div id="passagesContainer">
                    <div class="task-section">
                        <h3 style="margin-bottom: 25px;">📄 Passage 1</h3>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label>Passage Title <span class="required">*</span></label>
                                <input type="text" name="passage1Title" placeholder="e.g., The History of Coffee" required>
                            </div>
                            <div class="form-group">
                                <label>Topic Category</label>
                                <select name="passage1Category">
                                    <option value="science">Science & Technology</option>
                                    <option value="history">History & Culture</option>
                                    <option value="environment">Environment</option>
                                    <option value="society">Society & People</option>
                                    <option value="education">Education</option>
                                    <option value="business">Business & Economy</option>
                                    <option value="health">Health & Medicine</option>
                                    <option value="arts">Arts & Literature</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Passage Content <span class="required">*</span></label>
                            <textarea name="passage1Content" class="textarea-large" placeholder="Paste the complete reading passage here. Ensure it's appropriate for the selected difficulty level..." required></textarea>
                        </div>

                        <div class="question-builder">
                            <h4 style="margin-bottom: 20px;">📝 Questions for Passage 1</h4>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Question Type</label>
                                    <select id="readingQuestionType1">
                                        <option value="multiple-choice">Multiple Choice</option>
                                        <option value="true-false-notgiven">True/False/Not Given</option>
                                        <option value="yes-no-notgiven">Yes/No/Not Given</option>
                                        <option value="matching-headings">Matching Headings</option>
                                        <option value="matching-information">Matching Information</option>
                                        <option value="matching-features">Matching Features</option>
                                        <option value="sentence-completion">Sentence Completion</option>
                                        <option value="summary-completion">Summary Completion</option>
                                        <option value="note-completion">Note Completion</option>
                                        <option value="table-completion">Table Completion</option>
                                        <option value="flow-chart">Flow Chart Completion</option>
                                        <option value="diagram-labeling">Diagram Labeling</option>
                                        <option value="short-answer">Short Answer Questions</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Questions Range</label>
                                    <input type="text" name="passage1Range" placeholder="e.g., Questions 1-13">
                                </div>
                            </div>

                            <div id="readingQuestions1"></div>
                            
                            <button type="button" class="btn add-question-btn" onclick="addReadingQuestion(1)">+ Add Question to Passage 1</button>
                        </div>
                    </div>
                </div>

                <button type="button" class="btn btn-secondary" onclick="addPassage()">+ Add Another Passage</button>

                <div class="form-group" style="margin-top: 30px;">
                    <label>General Instructions</label>
                    <textarea name="generalInstructions" placeholder="General instructions for all passages (e.g., 'Read the passages and answer the questions', 'Transfer your answers to the answer sheet')"></textarea>
                </div>

                <!-- General Settings for Reading -->
                <div class="advanced-settings">
                    <h3 style="margin-bottom: 25px;">⚙️ General Settings</h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Created By</label>
                            <input type="text" name="createdBy" placeholder="Teacher/Author name">
                        </div>
                        <div class="form-group">
                            <label>Institution</label>
                            <input type="text" name="institution" placeholder="School/Institution name">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Test Availability</label>
                            <select name="availability">
                                <option value="public">Public (Anyone can access)</option>
                                <option value="private">Private (Invited users only)</option>
                                <option value="premium">Premium (Paid users only)</option>
                                <option value="draft">Draft (Not published)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Number of Attempts</label>
                            <select name="attempts">
                                <option value="unlimited">Unlimited</option>
                                <option value="1">1 Attempt</option>
                                <option value="2">2 Attempts</option>
                                <option value="3">3 Attempts</option>
                                <option value="5">5 Attempts</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Test Description</label>
                        <textarea name="description" placeholder="Brief description of this reading test, its objectives, and what students can expect..."></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Tags (for search)</label>
                            <input type="text" name="tags" placeholder="e.g., ielts, reading, academic, comprehension, band6">
                        </div>
                        <div class="form-group">
                            <label>Passing Score (%)</label>
                            <input type="number" name="passingScore" value="65" min="0" max="100">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Auto-grading</label>
                            <select name="autoGrading">
                                <option value="enabled">Enabled (automatic scoring)</option>
                                <option value="partial">Partial (with manual review)</option>
                                <option value="disabled">Disabled (manual grading only)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Show Results</label>
                            <select name="showResults">
                                <option value="immediate">Immediately after completion</option>
                                <option value="after-review">After manual review</option>
                                <option value="scheduled">After specific date</option>
                                <option value="never">Never (instructor only)</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Allow Review</label>
                            <select name="allowReview">
                                <option value="with-answers">Yes, with correct answers</option>
                                <option value="without-answers">Yes, without correct answers</option>
                                <option value="no">No review allowed</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Time Warning</label>
                            <select name="timeWarning">
                                <option value="5">5 minutes before end</option>
                                <option value="10">10 minutes before end</option>
                                <option value="15">15 minutes before end</option>
                                <option value="none">No warning</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Learning Objectives</label>
                        <textarea name="objectives" placeholder="What will students achieve after completing this reading test?
• Develop academic reading comprehension skills
• Practice different question types and strategies
• Improve vocabulary in context understanding
• Enhance time management for reading tasks..."></textarea>
                    </div>

                    <div class="form-group">
                        <label>Reading Strategies & Tips</label>
                        <textarea name="tips" placeholder="Helpful reading strategies for students:
• Skim the passage first for general understanding
• Read questions carefully before scanning for answers
• Look for keywords and synonyms
• Manage your time effectively across all passages
• Don't spend too much time on difficult questions..."></textarea>
                    </div>

                    <div class="form-group">
                        <label>Recommended Resources</label>
                        <textarea name="resources" placeholder="Books, websites, or materials students should study:
• Cambridge IELTS Practice Tests
• Academic vocabulary lists
• Reading comprehension strategies guide
• Online practice platforms..."></textarea>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 40px;">
                    <button type="button" class="btn btn-secondary">💾 Save as Draft</button>
                    <button type="submit" class="btn btn-success">🚀 Create Reading Test</button>
                </div>
            </form>
        </div>

        <!-- WRITING FORM -->
        <div id="writingForm" class="form-container">
            <button class="btn back-to-selector" onclick="backToSelector()">← Back to Skills</button>
            
            <h2 class="section-title">✍️ Writing Test Creator</h2>
            
            <form id="writingTestForm">
                <div class="form-row">
                    <div class="form-group">
                        <label>Test Title <span class="required">*</span></label>
                        <input type="text" name="title" placeholder="e.g., IELTS Writing Practice Test 1" required>
                    </div>
                    <div class="form-group">
                        <label>Test Type</label>
                        <select name="testType">
                            <option value="academic">Academic Writing</option>
                            <option value="general">General Training Writing</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Total Duration (minutes)</label>
                        <input type="number" name="duration" value="60" min="45" max="90">
                    </div>
                    <div class="form-group">
                        <label>Difficulty Level</label>
                        <select name="difficulty">
                            <option value="4-5">Band 4.0 - 5.0 (Beginner)</option>
                            <option value="5.5-6" selected>Band 5.5 - 6.0 (Intermediate)</option>
                            <option value="6.5-7">Band 6.5 - 7.0 (Upper-Intermediate)</option>
                            <option value="7.5-8">Band 7.5 - 8.0 (Advanced)</option>
                            <option value="8.5-9">Band 8.5 - 9.0 (Expert)</option>
                        </select>
                    </div>
                </div>

                <!-- Task 1 -->
                <div class="task-section">
                    <h3 style="margin-bottom: 25px;">✏️ Writing Task 1 (20 minutes)</h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Task Type</label>
                            <select name="task1Type" id="task1Type">
                                <option value="line-graph">Line Graph</option>
                                <option value="bar-chart">Bar Chart</option>
                                <option value="pie-chart">Pie Chart</option>
                                <option value="table">Table</option>
                                <option value="process-diagram">Process Diagram</option>
                                <option value="map">Map</option>
                                <option value="mixed-charts">Mixed Charts</option>
                                <option value="letter">Letter (General Training)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Minimum Words</label>
                            <input type="number" name="task1MinWords" value="150" min="100" max="200">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Task 1 Prompt <span class="required">*</span></label>
                        <textarea name="task1Prompt" class="textarea-large" placeholder="e.g., The chart shows the percentage of households in owned and rented accommodation in England and Wales between 1918 and 2011. Summarize the information by selecting and reporting the main features, and make comparisons where relevant." required></textarea>
                    </div>

                    <div class="form-group">
                        <label>Visual Material (Chart/Graph/Map)</label>
                        <div class="file-upload-area" onclick="document.getElementById('task1Visual').click()">
                            <p>📊 Upload chart, graph, diagram, or map</p>
                            <p style="font-size: 14px; color: #666; margin-top: 12px;">Supported formats: JPG, PNG, PDF (Max 10MB)</p>
                            <input type="file" id="task1Visual" name="task1Visual" accept="image/*,.pdf" style="display: none;">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Sample Answer (Optional)</label>
                        <textarea name="task1Sample" placeholder="Provide a model answer for reference and grading guidelines..."></textarea>
                    </div>
                </div>

                <!-- Task 2 -->
                <div class="task-section">
                    <h3 style="margin-bottom: 25px;">📝 Writing Task 2 (40 minutes)</h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Essay Type</label>
                            <select name="task2Type">
                                <option value="opinion">Opinion/Agree or Disagree</option>
                                <option value="discussion">Discussion (Both Views)</option>
                                <option value="advantages-disadvantages">Advantages and Disadvantages</option>
                                <option value="problem-solution">Problem and Solution</option>
                                <option value="direct-questions">Direct Questions</option>
                                <option value="mixed">Mixed Type</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Minimum Words</label>
                            <input type="number" name="task2MinWords" value="250" min="200" max="300">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Topic Category</label>
                        <select name="task2Category">
                            <option value="education">Education</option>
                            <option value="technology">Technology</option>
                            <option value="environment">Environment</option>
                            <option value="health">Health & Lifestyle</option>
                            <option value="society">Society & Culture</option>
                            <option value="government">Government & Politics</option>
                            <option value="work">Work & Career</option>
                            <option value="media">Media & Communication</option>
                            <option value="family">Family & Relationships</option>
                            <option value="globalization">Globalization</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Task 2 Question/Prompt <span class="required">*</span></label>
                        <textarea name="task2Prompt" class="textarea-large" placeholder="e.g., Some people think that universities should provide graduates with the knowledge and skills needed in the workplace. Others think that the true function of a university should be to give access to knowledge for its own sake. Discuss both views and give your own opinion." required></textarea>
                    </div>

                    <div class="form-group">
                        <label>Sample Answer (Optional)</label>
                        <textarea name="task2Sample" placeholder="Provide a model answer for reference and grading guidelines..."></textarea>
                    </div>
                </div>

                <div class="form-group">
                    <label>Assessment Criteria & Grading Notes</label>
                    <textarea name="assessmentNotes" placeholder="Special notes for graders about:
• Task Achievement/Response
• Coherence & Cohesion
• Lexical Resource
• Grammatical Range & Accuracy
• Specific marking criteria for this test"></textarea>
                </div>

                <!-- General Settings for Writing -->
                <div class="advanced-settings">
                    <h3 style="margin-bottom: 25px;">⚙️ General Settings</h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Created By</label>
                            <input type="text" name="createdBy" placeholder="Teacher/Author name">
                        </div>
                        <div class="form-group">
                            <label>Institution</label>
                            <input type="text" name="institution" placeholder="School/Institution name">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Test Availability</label>
                            <select name="availability">
                                <option value="public">Public (Anyone can access)</option>
                                <option value="private">Private (Invited users only)</option>
                                <option value="premium">Premium (Paid users only)</option>
                                <option value="draft">Draft (Not published)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Number of Attempts</label>
                            <select name="attempts">
                                <option value="unlimited">Unlimited</option>
                                <option value="1">1 Attempt</option>
                                <option value="2">2 Attempts</option>
                                <option value="3">3 Attempts</option>
                                <option value="5">5 Attempts</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Test Description</label>
                        <textarea name="description" placeholder="Brief description of this writing test, its objectives, and what students can expect..."></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Tags (for search)</label>
                            <input type="text" name="tags" placeholder="e.g., ielts, writing, academic, essay, task1, task2">
                        </div>
                        <div class="form-group">
                            <label>Minimum Band Score</label>
                            <select name="minBandScore">
                                <option value="4.0">Band 4.0</option>
                                <option value="4.5">Band 4.5</option>
                                <option value="5.0">Band 5.0</option>
                                <option value="5.5">Band 5.5</option>
                                <option value="6.0">Band 6.0</option>
                                <option value="6.5" selected>Band 6.5</option>
                                <option value="7.0">Band 7.0</option>
                                <option value="7.5">Band 7.5</option>
                                <option value="8.0">Band 8.0</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Plagiarism Check</label>
                            <select name="plagiarismCheck">
                                <option value="enabled">Enabled (AI detection)</option>
                                <option value="manual">Manual review only</option>
                                <option value="disabled">Disabled</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Grading Method</label>
                            <select name="gradingMethod">
                                <option value="holistic">Holistic (overall impression)</option>
                                <option value="analytic">Analytic (4 criteria separately)</option>
                                <option value="mixed">Mixed approach</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Show Results</label>
                            <select name="showResults">
                                <option value="after-manual">After manual grading</option>
                                <option value="after-peer">After peer review</option>
                                <option value="scheduled">After specific date</option>
                                <option value="never">Never (instructor only)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Allow Resubmission</label>
                            <select name="resubmission">
                                <option value="no">No resubmission</option>
                                <option value="before-deadline">Before deadline only</option>
                                <option value="with-penalty">With grade penalty</option>
                                <option value="unlimited">Unlimited (within attempts)</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Learning Objectives</label>
                        <textarea name="objectives" placeholder="What will students achieve after completing this writing test?
• Develop academic writing skills for Task 1 and Task 2
• Practice organizing ideas coherently and cohesively
• Improve lexical range and grammatical accuracy
• Learn to analyze visual data and express opinions effectively..."></textarea>
                    </div>

                    <div class="form-group">
                        <label>Writing Tips & Strategies</label>
                        <textarea name="tips" placeholder="Helpful writing advice for students:
• Plan your essays before writing (5 minutes for planning)
• Task 1: Spend 20 minutes, Task 2: Spend 40 minutes
• Use a variety of vocabulary and sentence structures
• Always check your work for grammar and spelling errors
• Address all parts of the question completely..."></textarea>
                    </div>

                    <div class="form-group">
                        <label>Assessment Rubric Details</label>
                        <textarea name="rubric" placeholder="Detailed assessment criteria:
• Task Achievement: How well the task requirements are fulfilled
• Coherence & Cohesion: Logical organization and linking
• Lexical Resource: Range and accuracy of vocabulary
• Grammar: Range and accuracy of structures
• Specific weightings and expectations..."></textarea>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 40px;">
                    <button type="button" class="btn btn-secondary">💾 Save as Draft</button>
                    <button type="submit" class="btn btn-success">🚀 Create Writing Test</button>
                </div>
            </form>
        </div>

        <!-- SPEAKING FORM -->
        <div id="speakingForm" class="form-container">
            <button class="btn back-to-selector" onclick="backToSelector()">← Back to Skills</button>
            
            <h2 class="section-title">🎤 Speaking Test Creator</h2>
            
            <form id="speakingTestForm">
                <div class="form-row">
                    <div class="form-group">
                        <label>Test Title <span class="required">*</span></label>
                        <input type="text" name="title" placeholder="e.g., IELTS Speaking Practice Test 1" required>
                    </div>
                    <div class="form-group">
                        <label>Total Duration (minutes)</label>
                        <input type="number" name="duration" value="15" min="10" max="20">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Difficulty Level</label>
                        <select name="difficulty">
                            <option value="4-5">Band 4.0 - 5.0 (Beginner)</option>
                            <option value="5.5-6" selected>Band 5.5 - 6.0 (Intermediate)</option>
                            <option value="6.5-7">Band 6.5 - 7.0 (Upper-Intermediate)</option>
                            <option value="7.5-8">Band 7.5 - 8.0 (Advanced)</option>
                            <option value="8.5-9">Band 8.5 - 9.0 (Expert)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Test Format</label>
                        <select name="testFormat">
                            <option value="complete">Complete Test (3 Parts)</option>
                            <option value="part1">Part 1 Only</option>
                            <option value="part2">Part 2 Only</option>
                            <option value="part3">Part 3 Only</option>
                        </select>
                    </div>
                </div>

                <!-- Part 1 -->
                <div class="task-section">
                    <h3 style="margin-bottom: 25px;">🎤 Part 1: Introduction & Interview (4-5 minutes)</h3>
                    
                    <div class="form-group">
                        <label>Topic Categories</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" name="part1Topics" value="home" id="topic-home">
                                <label for="topic-home">Home/Accommodation</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="part1Topics" value="work-study" id="topic-work">
                                <label for="topic-work">Work/Study</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="part1Topics" value="hobbies" id="topic-hobbies">
                                <label for="topic-hobbies">Hobbies & Interests</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="part1Topics" value="food" id="topic-food">
                                <label for="topic-food">Food & Cooking</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="part1Topics" value="transport" id="topic-transport">
                                <label for="topic-transport">Transport</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="part1Topics" value="weather" id="topic-weather">
                                <label for="topic-weather">Weather & Seasons</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Part 1 Questions <span class="required">*</span></label>
                        <textarea name="part1Questions" class="textarea-large" placeholder="List questions for Part 1 (usually 10-12 questions):

Example:
1. Can you tell me your full name?
2. What should I call you?
3. Where are you from?
4. Do you work or are you a student?
5. What do you like most about your job/studies?
6. Do you live in a house or an apartment?
7. What's your favorite room in your home?
8. What do you like to do in your free time?
9. How often do you cook at home?
10. What's the weather like in your hometown?
..." required></textarea>
                    </div>
                </div>

                <!-- Part 2 -->
                <div class="task-section">
                    <h3 style="margin-bottom: 25px;">📋 Part 2: Long Turn (3-4 minutes)</h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Cue Card Topic <span class="required">*</span></label>
                            <input type="text" name="cueCardTopic" placeholder="e.g., Describe a person who has influenced you" required>
                        </div>
                        <div class="form-group">
                            <label>Topic Category</label>
                            <select name="part2Category">
                                <option value="people">People & Relationships</option>
                                <option value="places">Places & Travel</option>
                                <option value="objects">Objects & Possessions</option>
                                <option value="events">Events & Experiences</option>
                                <option value="activities">Activities & Hobbies</option>
                                <option value="media">Media & Entertainment</option>
                                <option value="abstract">Abstract Topics</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Cue Card Content <span class="required">*</span></label>
                        <textarea name="cueCardContent" class="textarea-large" placeholder="Describe a person who has influenced you

You should say:
• Who this person is
• How you know them
• What influence they had on you
• And explain why this person has been important to you

You have 1 minute to think about what you're going to say.
You can make notes if you wish.
You should talk for 1-2 minutes." required></textarea>
                    </div>

                    <div class="form-group">
                        <label>Follow-up Questions</label>
                        <textarea name="followUpQuestions" placeholder="1-2 follow-up questions:
• Is this person still important to you?
• Have you told this person about their influence on you?"></textarea>
                    </div>
                </div>

                <!-- Part 3 -->
                <div class="task-section">
                    <h3 style="margin-bottom: 25px;">🤔 Part 3: Discussion (4-5 minutes)</h3>
                    
                    <div class="form-group">
                        <label>Discussion Theme <span class="required">*</span></label>
                        <input type="text" name="discussionTheme" placeholder="e.g., Influence and Role Models in Society" required>
                    </div>

                    <div class="form-group">
                        <label>Part 3 Questions <span class="required">*</span></label>
                        <textarea name="part3Questions" class="textarea-large" placeholder="Abstract discussion questions related to Part 2 topic:

Example:
1. What kind of people influence young people the most?
2. Do you think celebrities have a responsibility to be good role models?
3. How has the way people influence each other changed with social media?
4. In what ways can negative influences be avoided?
5. Should parents be concerned about who influences their children?
6. What qualities make someone a good influence on others?
7. How important is it for children to have positive role models?
8. Do you think people are more easily influenced now than in the past?" required></textarea>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Examiner Instructions</label>
                        <textarea name="examinerInstructions" placeholder="Special instructions for examiners conducting this test:
• Specific timing for each part
• How to handle difficult candidates
• When to move between topics
• Assessment focus areas"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Assessment Focus Areas</label>
                        <textarea name="assessmentFocus" placeholder="Key areas to assess:
• Fluency and Coherence
• Lexical Resource
• Grammatical Range and Accuracy  
• Pronunciation
• Specific criteria for this test"></textarea>
                    </div>
                </div>

                <!-- General Settings for Speaking -->
                <div class="advanced-settings">
                    <h3 style="margin-bottom: 25px;">⚙️ General Settings</h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Created By</label>
                            <input type="text" name="createdBy" placeholder="Teacher/Author name">
                        </div>
                        <div class="form-group">
                            <label>Institution</label>
                            <input type="text" name="institution" placeholder="School/Institution name">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Test Availability</label>
                            <select name="availability">
                                <option value="public">Public (Anyone can access)</option>
                                <option value="private">Private (Invited users only)</option>
                                <option value="premium">Premium (Paid users only)</option>
                                <option value="draft">Draft (Not published)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Number of Attempts</label>
                            <select name="attempts">
                                <option value="unlimited">Unlimited</option>
                                <option value="1">1 Attempt</option>
                                <option value="2">2 Attempts</option>
                                <option value="3">3 Attempts</option>
                                <option value="5">5 Attempts</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Test Description</label>
                        <textarea name="description" placeholder="Brief description of this speaking test, its objectives, and what students can expect..."></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Tags (for search)</label>
                            <input type="text" name="tags" placeholder="e.g., ielts, speaking, interview, fluency, pronunciation">
                        </div>
                        <div class="form-group">
                            <label>Minimum Band Score</label>
                            <select name="minBandScore">
                                <option value="4.0">Band 4.0</option>
                                <option value="4.5">Band 4.5</option>
                                <option value="5.0">Band 5.0</option>
                                <option value="5.5">Band 5.5</option>
                                <option value="6.0">Band 6.0</option>
                                <option value="6.5" selected>Band 6.5</option>
                                <option value="7.0">Band 7.0</option>
                                <option value="7.5">Band 7.5</option>
                                <option value="8.0">Band 8.0</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Recording Required</label>
                            <select name="recordingRequired">
                                <option value="yes">Yes (for review)</option>
                                <option value="optional">Optional</option>
                                <option value="no">No recording</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Test Format</label>
                            <select name="speakingFormat">
                                <option value="face-to-face">Face-to-face interview</option>
                                <option value="online-live">Online live interview</option>
                                <option value="recorded-response">Recorded responses</option>
                                <option value="ai-assisted">AI-assisted evaluation</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Grading Method</label>
                            <select name="gradingMethod">
                                <option value="holistic">Holistic (overall impression)</option>
                                <option value="analytic">Analytic (4 criteria separately)</option>
                                <option value="mixed">Mixed approach</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Show Results</label>
                            <select name="showResults">
                                <option value="after-evaluation">After examiner evaluation</option>
                                <option value="scheduled">After specific date</option>
                                <option value="never">Never (instructor only)</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Preparation Time</label>
                            <select name="prepTime">
                                <option value="standard">Standard (1 min for Part 2)</option>
                                <option value="extended">Extended (2 min for Part 2)</option>
                                <option value="minimal">Minimal (30 sec for Part 2)</option>
                                <option value="none">No preparation time</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Allow Notes</label>
                            <select name="allowNotes">
                                <option value="yes">Yes (paper provided)</option>
                                <option value="digital">Yes (digital notepad)</option>
                                <option value="no">No notes allowed</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Learning Objectives</label>
                        <textarea name="objectives" placeholder="What will students achieve after completing this speaking test?
• Develop fluency and coherence in spoken English
• Practice expressing opinions and ideas clearly
• Improve pronunciation and intonation
• Build confidence in speaking in different contexts
• Learn to organize thoughts quickly and effectively..."></textarea>
                    </div>

                    <div class="form-group">
                        <label>Speaking Tips & Strategies</label>
                        <textarea name="tips" placeholder="Helpful speaking advice for students:
• Don't memorize answers - be natural and spontaneous
• Use the preparation time effectively for Part 2
• Speak clearly and at a moderate pace
• Extend your answers with examples and explanations
• Don't worry about perfect grammar - focus on communication
• Practice different topics and question types regularly..."></textarea>
                    </div>

                    <div class="form-group">
                        <label>Technical Requirements</label>
                        <textarea name="techRequirements" placeholder="Technical setup needed:
• Good quality microphone and headphones
• Stable internet connection (for online tests)
• Quiet environment free from distractions
• Camera setup (if video recording required)
• Backup recording device (optional)..."></textarea>
                    </div>

                    <div class="form-group">
                        <label>Examiner Training Notes</label>
                        <textarea name="examinerNotes" placeholder="Important notes for examiners:
• How to create a comfortable environment
• When to prompt for more information
• How to handle long silences
• Specific assessment criteria focus
• Cultural sensitivity considerations..."></textarea>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 40px;">
                    <button type="button" class="btn btn-secondary">💾 Save as Draft</button>
                    <button type="submit" class="btn btn-success">🚀 Create Speaking Test</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        let questionCounters = {
            listening: 1,
            reading: { 1: 1, 2: 1, 3: 1 },
            passageCount: 1
        };

        function showForm(skill) {
            // Hide skill selector
            document.getElementById('skillSelector').style.display = 'none';
            
            // Hide all forms
            document.querySelectorAll('.form-container').forEach(form => {
                form.classList.remove('active');
            });
            
            // Show selected form
            document.getElementById(skill + 'Form').classList.add('active');
        }

        function backToSelector() {
            // Show skill selector
            document.getElementById('skillSelector').style.display = 'grid';
            
            // Hide all forms
            document.querySelectorAll('.form-container').forEach(form => {
                form.classList.remove('active');
            });
        }

        function addListeningQuestion() {
            const questionsContainer = document.getElementById('listeningQuestions');
            const questionType = document.getElementById('listeningQuestionType').value;
            const section = document.getElementById('listeningSection').value;
            const timeRange = document.getElementById('timeRange').value;
            const questionNumber = questionCounters.listening++;
            
            let questionHTML = `
                <div class="question-item" data-question="${questionNumber}">
                    <div class="question-header">
                        <div class="question-number">${questionNumber}</div>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <small style="color: #666;">Section ${section} | ${timeRange || 'No time specified'}</small>
                            <button type="button" class="btn btn-danger" onclick="removeQuestion(this)">🗑️ Delete</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Question ${questionNumber}</label>
                        <textarea name="question_${questionNumber}" placeholder="Enter the question text..." required></textarea>
                    </div>`;
            
            if (questionType === 'multiple-choice') {
                questionHTML += `
                    <div class="options-container">
                        <div class="option-input">
                            <input type="radio" name="correct_${questionNumber}" value="A" required>
                            <input type="text" name="option_${questionNumber}_A" placeholder="Option A" required>
                        </div>
                        <div class="option-input">
                            <input type="radio" name="correct_${questionNumber}" value="B">
                            <input type="text" name="option_${questionNumber}_B" placeholder="Option B" required>
                        </div>
                        <div class="option-input">
                            <input type="radio" name="correct_${questionNumber}" value="C">
                            <input type="text" name="option_${questionNumber}_C" placeholder="Option C" required>
                        </div>
                        <div class="option-input">
                            <input type="radio" name="correct_${questionNumber}" value="D">
                            <input type="text" name="option_${questionNumber}_D" placeholder="Option D" required>
                        </div>
                    </div>`;
            } else {
                questionHTML += `
                    <div class="form-group">
                        <label>Correct Answer</label>
                        <input type="text" name="answer_${questionNumber}" placeholder="Enter the correct answer..." required>
                    </div>`;
            }
            
            questionHTML += `
                    <div class="form-row">
                        <div class="form-group">
                            <label>Points</label>
                            <input type="number" name="points_${questionNumber}" value="1" min="0.5" max="5" step="0.5">
                        </div>
                        <div class="form-group">
                            <label>Explanation (Optional)</label>
                            <input type="text" name="explanation_${questionNumber}" placeholder="Explanation for the answer">
                        </div>
                    </div>
                    <input type="hidden" name="question_type_${questionNumber}" value="${questionType}">
                    <input type="hidden" name="question_section_${questionNumber}" value="${section}">
                    <input type="hidden" name="question_time_${questionNumber}" value="${timeRange}">
                </div>`;
            
            questionsContainer.insertAdjacentHTML('beforeend', questionHTML);
        }

        function addReadingQuestion(passageNum) {
            const questionsContainer = document.getElementById(`readingQuestions${passageNum}`);
            const questionType = document.getElementById(`readingQuestionType${passageNum}`).value;
            const questionNumber = questionCounters.reading[passageNum]++;
            
            let questionHTML = `
                <div class="question-item" data-question="${questionNumber}" data-passage="${passageNum}">
                    <div class="question-header">
                        <div class="question-number">${questionNumber}</div>
                        <button type="button" class="btn btn-danger" onclick="removeQuestion(this)">🗑️ Delete</button>
                    </div>
                    <div class="form-group">
                        <label>Question ${questionNumber}</label>
                        <textarea name="passage${passageNum}_question_${questionNumber}" placeholder="Enter the question text..." required></textarea>
                    </div>`;
            
            if (questionType === 'multiple-choice') {
                questionHTML += `
                    <div class="options-container">
                        <div class="option-input">
                            <input type="radio" name="passage${passageNum}_correct_${questionNumber}" value="A" required>
                            <input type="text" name="passage${passageNum}_option_${questionNumber}_A" placeholder="Option A" required>
                        </div>
                        <div class="option-input">
                            <input type="radio" name="passage${passageNum}_correct_${questionNumber}" value="B">
                            <input type="text" name="passage${passageNum}_option_${questionNumber}_B" placeholder="Option B" required>
                        </div>
                        <div class="option-input">
                            <input type="radio" name="passage${passageNum}_correct_${questionNumber}" value="C">
                            <input type="text" name="passage${passageNum}_option_${questionNumber}_C" placeholder="Option C" required>
                        </div>
                        <div class="option-input">
                            <input type="radio" name="passage${passageNum}_correct_${questionNumber}" value="D">
                            <input type="text" name="passage${passageNum}_option_${questionNumber}_D" placeholder="Option D" required>
                        </div>
                    </div>`;
            } else if (questionType === 'true-false-notgiven' || questionType === 'yes-no-notgiven') {
                const options = questionType === 'true-false-notgiven' 
                    ? ['True', 'False', 'Not Given'] 
                    : ['Yes', 'No', 'Not Given'];
                questionHTML += `
                    <div class="options-container">
                        ${options.map(option => `
                            <div class="option-input">
                                <input type="radio" name="passage${passageNum}_correct_${questionNumber}" value="${option}" required>
                                <label>${option}</label>
                            </div>
                        `).join('')}
                    </div>`;
            } else {
                questionHTML += `
                    <div class="form-group">
                        <label>Correct Answer</label>
                        <input type="text" name="passage${passageNum}_answer_${questionNumber}" placeholder="Enter the correct answer..." required>
                    </div>`;
            }
            
            questionHTML += `
                    <div class="form-row">
                        <div class="form-group">
                            <label>Paragraph Reference</label>
                            <input type="text" name="passage${passageNum}_paragraph_${questionNumber}" placeholder="e.g., Paragraph C">
                        </div>
                        <div class="form-group">
                            <label>Points</label>
                            <input type="number" name="passage${passageNum}_points_${questionNumber}" value="1" min="0.5" max="5" step="0.5">
                        </div>
                    </div>
                    <input type="hidden" name="passage${passageNum}_question_type_${questionNumber}" value="${questionType}">
                </div>`;
            
            questionsContainer.insertAdjacentHTML('beforeend', questionHTML);
        }

        function addPassage() {
            if (questionCounters.passageCount >= 3) {
                alert('Maximum 3 passages allowed for a reading test.');
                return;
            }

            questionCounters.passageCount++;
            const passageNum = questionCounters.passageCount;
            questionCounters.reading[passageNum] = 1;

            const passagesContainer = document.getElementById('passagesContainer');
            const newPassageHTML = `
                <div class="task-section">
                    <h3 style="margin-bottom: 25px;">📄 Passage ${passageNum}</h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Passage Title <span class="required">*</span></label>
                            <input type="text" name="passage${passageNum}Title" placeholder="e.g., Climate Change Solutions" required>
                        </div>
                        <div class="form-group">
                            <label>Topic Category</label>
                            <select name="passage${passageNum}Category">
                                <option value="science">Science & Technology</option>
                                <option value="history">History & Culture</option>
                                <option value="environment">Environment</option>
                                <option value="society">Society & People</option>
                                <option value="education">Education</option>
                                <option value="business">Business & Economy</option>
                                <option value="health">Health & Medicine</option>
                                <option value="arts">Arts & Literature</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Passage Content <span class="required">*</span></label>
                        <textarea name="passage${passageNum}Content" class="textarea-large" placeholder="Paste the complete reading passage here..." required></textarea>
                    </div>

                    <div class="question-builder">
                        <h4 style="margin-bottom: 20px;">📝 Questions for Passage ${passageNum}</h4>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label>Question Type</label>
                                <select id="readingQuestionType${passageNum}">
                                    <option value="multiple-choice">Multiple Choice</option>
                                    <option value="true-false-notgiven">True/False/Not Given</option>
                                    <option value="yes-no-notgiven">Yes/No/Not Given</option>
                                    <option value="matching-headings">Matching Headings</option>
                                    <option value="matching-information">Matching Information</option>
                                    <option value="matching-features">Matching Features</option>
                                    <option value="sentence-completion">Sentence Completion</option>
                                    <option value="summary-completion">Summary Completion</option>
                                    <option value="note-completion">Note Completion</option>
                                    <option value="table-completion">Table Completion</option>
                                    <option value="flow-chart">Flow Chart Completion</option>
                                    <option value="diagram-labeling">Diagram Labeling</option>
                                    <option value="short-answer">Short Answer Questions</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Questions Range</label>
                                <input type="text" name="passage${passageNum}Range" placeholder="e.g., Questions 14-26">
                            </div>
                        </div>

                        <div id="readingQuestions${passageNum}"></div>
                        
                        <button type="button" class="btn add-question-btn" onclick="addReadingQuestion(${passageNum})">+ Add Question to Passage ${passageNum}</button>
                    </div>

                    <button type="button" class="btn btn-danger" onclick="removePassage(this)" style="margin-top: 20px;">🗑️ Remove This Passage</button>
                </div>`;
            
            passagesContainer.insertAdjacentHTML('beforeend', newPassageHTML);
        }

        function removePassage(button) {
            if (questionCounters.passageCount <= 1) {
                alert('At least one passage is required.');
                return;
            }
            button.closest('.task-section').remove();
            questionCounters.passageCount--;
        }

        function removeQuestion(button) {
            const questionItem = button.closest('.question-item');
            if (questionItem) {
                questionItem.remove();
            }
        }

        // File upload handlers
        function setupFileUpload(inputId, displayAreaSelector) {
            const input = document.getElementById(inputId);
            const displayArea = input.closest('.file-upload-area');
            
            input.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    displayArea.innerHTML = `
                        <p>✅ ${file.name}</p>
                        <p style="font-size: 12px; color: #666;">File size: ${(file.size / 1024 / 1024).toFixed(2)} MB</p>
                        <button type="button" onclick="clearFile('${inputId}')" style="margin-top: 10px; background: #dc3545; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer;">Remove File</button>
                    `;
                }
            });
        }

        function clearFile(inputId) {
            const input = document.getElementById(inputId);
            const displayArea = input.closest('.file-upload-area');
            input.value = '';
            
            // Reset to original upload area
            if (inputId === 'audioFile') {
                displayArea.innerHTML = `
                    <p>🎵 Click to upload audio file or drag & drop</p>
                    <p style="font-size: 14px; color: #666; margin-top: 12px;">Supported formats: MP3, WAV, M4A (Max 100MB)</p>
                `;
            } else if (inputId === 'task1Visual') {
                displayArea.innerHTML = `
                    <p>📊 Upload chart, graph, diagram, or map</p>
                    <p style="font-size: 14px; color: #666; margin-top: 12px;">Supported formats: JPG, PNG, PDF (Max 10MB)</p>
                `;
            }
        }

        // Form submission handlers
        function setupFormSubmission() {
            // Listening form
            document.getElementById('listeningTestForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(this);
                console.log('Listening Test Data:', Object.fromEntries(formData));
                alert('Listening test created successfully! (This is a demo)');
            });

            // Reading form
            document.getElementById('readingTestForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(this);
                console.log('Reading Test Data:', Object.fromEntries(formData));
                alert('Reading test created successfully! (This is a demo)');
            });

            // Writing form
            document.getElementById('writingTestForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(this);
                console.log('Writing Test Data:', Object.fromEntries(formData));
                alert('Writing test created successfully! (This is a demo)');
            });

            // Speaking form
            document.getElementById('speakingTestForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(this);
                console.log('Speaking Test Data:', Object.fromEntries(formData));
                alert('Speaking test created successfully! (This is a demo)');
            });
        }

        // Drag and drop functionality
        function setupDragAndDrop() {
            document.querySelectorAll('.file-upload-area').forEach(area => {
                area.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    this.classList.add('dragover');
                });
                
                area.addEventListener('dragleave', function(e) {
                    e.preventDefault();
                    this.classList.remove('dragover');
                });
                
                area.addEventListener('drop', function(e) {
                    e.preventDefault();
                    this.classList.remove('dragover');
                    
                    const files = e.dataTransfer.files;
                    if (files.length > 0) {
                        const file = files[0];
                        const input = this.querySelector('input[type="file"]');
                        
                        // Create a new file list and assign to input
                        const dataTransfer = new DataTransfer();
                        dataTransfer.items.add(file);
                        input.files = dataTransfer.files;
                        
                        // Trigger change event
                        input.dispatchEvent(new Event('change', { bubbles: true }));
                    }
                });
            });
        }

        // Initialize everything when DOM loads
        document.addEventListener('DOMContentLoaded', function() {
            setupFileUpload('audioFile', '.file-upload-area');
            setupFileUpload('task1Visual', '.file-upload-area');
            setupFormSubmission();
            setupDragAndDrop();
        });

        // Auto-save functionality
        let autoSaveTimer;
        document.addEventListener('input', function(e) {
            if (e.target.form) {
                clearTimeout(autoSaveTimer);
                autoSaveTimer = setTimeout(() => {
                    console.log('Auto-saving form data...');
                    // Here you would implement actual auto-save to backend
                    const formData = new FormData(e.target.form);
                    localStorage.setItem('ielts_test_draft_' + e.target.form.id, JSON.stringify(Object.fromEntries(formData)));
                }, 3000);
            }
        });
    </script>
</body>
</html>